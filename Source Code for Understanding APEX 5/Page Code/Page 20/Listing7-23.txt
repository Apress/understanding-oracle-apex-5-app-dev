-- Listing 7-23. Code for the Update Processdeclare    v_valuesToHash apex_t_varchar2;begin    -- First re-read the data.    select apex_t_varchar2(Job, Sal, DeptNo)    into v_valuesToHash    from EMP    where EmpNo = :P20_EMPNO;    -- Then compare it with the original data.    if :P20_HASH = apex_util.get_hash(v_valuesToHash)    then        -- The record hasn't changed, so update it.        update EMP        set Job    = :P20_UPDATE_JOB,            Sal    = :P20_UPDATE_SALARY,            DeptNo = :P20_UPDATE_DEPTNO        where EmpNo = :P20_EMPNO;        -- And return to report mode.        :P20_MODE := 'Report';    else        -- The record has changed, so abort.        raise_application_error(-20000,                       'The record is out of date. Get it again.');    end if;end;